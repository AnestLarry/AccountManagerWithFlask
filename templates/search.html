{% extends "base.html" %}
{% block head %}
<script>
	$(document).ready(function () {
		$("#Search_button").click(function () {
			alert('succ');
			var t = $("input[name='Search_select_button']:checked").val();
			var d = {
				"0": $('#Search_Address').val(),
				"1": $('#Search_Account').val(),
				"2": $('#Search_Password').val(),
				"3": $('#Search_Text').val()
			};
			Searched_Item(t, d[t], s_vm.result_language);
			// switch (t) {
			// 	case "0":
			// 		Searched_Item(t, $('#Search_Address').val(), s_vm.result_language);
			// 		break;
			// 	case "1":
			// 		Searched_Item(t, $('#Search_Account').val(), s_vm.result_language);
			// 		break;
			// 	case "2":
			// 		Searched_Item(t, $('#Search_Password').val(), s_vm.result_language);
			// 		break;
			// 	case "3":
			// 		Searched_Item(t, $('#Search_Text').val(), s_vm.result_language);
			// 		break;
			// }
		})
	})
	function Searched_Item(key, keyword, give_language) {
		$.post("{{ get_urls('Search_item') }}", {
			key: key,
			keyword: keyword,
			language: give_language
		}, function (data) {
			var temp = $.parseJSON(data);
			s_vm.IsSearched = true;
			s_vm.searched_date = temp[temp.length - 1][0];
			temp.splice(temp.length - 1, 1);
			s_vm.searched_data = temp;
		})
	}
</script>
{% endblock %}
{% block body %}
<div id="SearchBody">
	<hr>
	{% raw %}
	<p align="center">{{labels[0]}}</p>
	<hr>
	<div id="search">
		<div id="search-label-Address" style="width:45%;float:left;">
			&emsp;&emsp;{{labels[1]}}
		</div>
		<div id="search-choice-Address" style="width:45%;float:left;">
			<input id="Search_Address" />&emsp;<input type="radio" id="Search_item" value="0"
				name="Search_select_button" checked>
		</div>
		<br><br>
		<div id="search-label-Account" style="width:45%;float:left;">
			&emsp;&emsp;{{labels[2]}}
		</div>
		<div id="search-choice-Account" style="width:45%;float:left;">
			<input id="Search_Account" />&emsp;<input type="radio" id="Search_item" value="1"
				name="Search_select_button">
		</div>
		<br><br>
		<div id="search-label-Password" style="width:45%;float:left;">
			&emsp;&emsp;{{labels[3]}}
		</div>
		<div id="search-choice-Password" style="width:45%;float:left;">
			<input id="Search_Password" />&emsp;<input type="radio" id="Search_item" value="2"
				name="Search_select_button">
		</div>
		<br><br>
		<div id="search-label-Text" style="width:45%;float:left;">
			&emsp;&emsp;{{labels[4]}}
		</div>
		<div id="search-choice-Text" style="width:45%;float:left;">
			<input id="Search_Text" />&emsp;<input type="radio" id="Search_item" value="3" name="Search_select_button">
		</div>
		<br><br>
		<p align="center"><input type="button" id='Search_button' :value="labels[5]" /></p>
		<br>
	</div>
	<hr>
	<div align="center" v-if="IsSearched" v-for="item in searched_data">
		<table border="1">
			<font size=5>
				<tr v-for="i in item.length">
					<td>{{ searched_data_labels[i-1] }}</td>
					<td><input readonly style="width:250px" onfocus="this.select()" :value="item[i-1]" /></td>
				</tr><br>
			</font>
		</table>
	</div>
	<p align="center" v-show="IsSearched" style="float: center;">{{ searched_data_labels[5] }}:{{ searched_date }}</p>
	{% endraw %}
</div>
<script>
	var s_vm = new Vue({
		el: "#SearchBody",
		data: {
		    {% if language == "zh" %}
	labels: ["搜索", "地址", "账号", "密码", "标注", "搜索", "无"],
		result_language: "zh-cn",
			searched_data_labels: ["地址", "账号", "密码", "日期", "标注", "搜索时间"],
				{% else %}
	labels: ["Search", "Address", "Account", "Password", "Text", "Search", "None"],
		result_language: "en-us",
			searched_data_labels: ["Address", "Account", "Password", "Date", "Text", "Search Time"],
				{% endif %}
	IsSearched: false,
		searched_data: [[],],
			searched_date: "",
			}
		})
</script>
{% endblock %}